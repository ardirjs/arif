<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="theme-color" content="#28a745">
  <meta name="msapplication-navbutton-color" content="#28a745">
  <meta name="apple-mobile-web-app-status-bar-style" content="#28a745">
  <meta name="programmer" content="https://github.com/ardirjs">
  <meta name="description" content="https://github.com/ardirjs">
  <meta name="keywords" content="https://github.com/ardirjs">
  <meta name="author" content="https://github.com/ardirjs">
  <meta name="title" content="https://github.com/ardirjs">
  <meta name="copyright" content="https://github.com/ardirjs">
  <meta Http-Equiv="Expires" content="0">
  <meta Http-Equiv="Pragma" content="No-Cache">
  <meta Http-Equiv="Content-type" content="Text/Html">
  <meta Http-Equiv="Cache-Control" content="No-Cache">
  <meta Http-Equiv="Cache-Control" content="No-Store">
  <meta Http-Equiv="Content-Language" content="En-Us">
  <meta Http-Equiv="X-UA-Compatible" content="IE=Edge">
  <title>Monitoring Inkubator Jamur</title>
  <link rel="stylesheet" href="https://ardirjs.github.io/distribution/plugin/bootstrap/css/bootstrap.min.css">
</head>
<body>
  <div class="container">
    <div class="row justify-content-center">
      <div class="my-0 col-12 col-lg-6">
        <div class="d-flex">
          <div class="px-2 my-0 flex-fill w-100">
            <div class="p-3 my-0 text-center shadow-sm bg-success text-light">
              <span class="h3 font-weight-bolder"><u>Monitoring Inkubator Jamur</u></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row justify-content-center">
      <div class="my-3 col-12 col-lg-6">
        <div class="d-flex">
          <div class="px-2 my-2 flex-fill w-100">
            <div class="p-2 my-0 text-center rounded shadow-sm bg-secondary text-light">
              <span class="h5 font-weight-bolder">Temperature</span>
              <hr class="my-1" style="border-color: #fff;">
              <span class="h5 font-weight-bolder" id="temperature">0</span>
              <span class="h5 font-weight-bolder">&deg;C</span>
            </div>
          </div>
          <div class="px-2 my-2 flex-fill w-100">
            <div class="p-2 my-0 text-center rounded shadow-sm bg-secondary text-light">
              <span class="h5 font-weight-bolder">Humidity</span>
              <hr class="my-1" style="border-color: #fff;">
              <span class="h5 font-weight-bolder" id="humidity">0</span>
              <span class="h5 font-weight-bolder">%</span>
            </div>
          </div>
        </div>
        <div class="d-flex flex-column">
          <div class="px-2 my-1 flex-fill">
            <div class="input-group input-group-sm">
              <div class="input-group-prepend">
                <span class="input-group-text font-weight-bolder">Set Interval</span>
              </div>
              <select class="custom-select shadow-none" name="setInterval" id="setInterval">
                <option selected></option>
                <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option>
              </select>
            </div>
          </div>
          <div class="px-2 my-1 flex-fill">
            <div class="input-group input-group-sm">
              <div class="input-group-prepend">
                <span class="input-group-text font-weight-bolder">Set Point Temperature (&deg;C)</span>
              </div>
              <select class="custom-select shadow-none" name="setTemperature" id="setTemperature">
                <option selected></option>
                <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option><option value="32">32</option><option value="33">33</option><option value="34">34</option><option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="38">38</option><option value="39">39</option><option value="40">40</option><option value="41">41</option><option value="42">42</option><option value="43">43</option><option value="44">44</option><option value="45">45</option><option value="46">46</option><option value="47">47</option><option value="48">48</option><option value="49">49</option><option value="50">50</option><option value="51">51</option><option value="52">52</option><option value="53">53</option><option value="54">54</option><option value="55">55</option><option value="56">56</option><option value="57">57</option><option value="58">58</option><option value="59">59</option><option value="60">60</option><option value="61">61</option><option value="62">62</option><option value="63">63</option><option value="64">64</option><option value="65">65</option><option value="66">66</option><option value="67">67</option><option value="68">68</option><option value="69">69</option><option value="70">70</option><option value="71">71</option><option value="72">72</option><option value="73">73</option><option value="74">74</option><option value="75">75</option><option value="76">76</option><option value="77">77</option><option value="78">78</option><option value="79">79</option><option value="80">80</option><option value="81">81</option><option value="82">82</option><option value="83">83</option><option value="84">84</option><option value="85">85</option><option value="86">86</option><option value="87">87</option><option value="88">88</option><option value="89">89</option><option value="90">90</option><option value="91">91</option><option value="92">92</option><option value="93">93</option><option value="94">94</option><option value="95">95</option><option value="96">96</option><option value="97">97</option><option value="98">98</option><option value="99">99</option><option value="100">100</option>
              </select>
            </div>
          </div>
          <div class="px-2 my-1 flex-fill">
            <div class="input-group input-group-sm">
              <div class="input-group-prepend">
                <span class="input-group-text font-weight-bolder">Set Minimum Humidity (%)</span>
              </div>
              <select class="custom-select shadow-none" name="setHumidity" id="setHumidity">
                <option selected></option>
                <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option><option value="32">32</option><option value="33">33</option><option value="34">34</option><option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="38">38</option><option value="39">39</option><option value="40">40</option><option value="41">41</option><option value="42">42</option><option value="43">43</option><option value="44">44</option><option value="45">45</option><option value="46">46</option><option value="47">47</option><option value="48">48</option><option value="49">49</option><option value="50">50</option><option value="51">51</option><option value="52">52</option><option value="53">53</option><option value="54">54</option><option value="55">55</option><option value="56">56</option><option value="57">57</option><option value="58">58</option><option value="59">59</option><option value="60">60</option><option value="61">61</option><option value="62">62</option><option value="63">63</option><option value="64">64</option><option value="65">65</option><option value="66">66</option><option value="67">67</option><option value="68">68</option><option value="69">69</option><option value="70">70</option><option value="71">71</option><option value="72">72</option><option value="73">73</option><option value="74">74</option><option value="75">75</option><option value="76">76</option><option value="77">77</option><option value="78">78</option><option value="79">79</option><option value="80">80</option><option value="81">81</option><option value="82">82</option><option value="83">83</option><option value="84">84</option><option value="85">85</option><option value="86">86</option><option value="87">87</option><option value="88">88</option><option value="89">89</option><option value="90">90</option><option value="91">91</option><option value="92">92</option><option value="93">93</option><option value="94">94</option><option value="95">95</option><option value="96">96</option><option value="97">97</option><option value="98">98</option><option value="99">99</option><option value="100">100</option>
              </select>
            </div>
          </div>
          <div class="px-2 my-0 flex-fill">
            <span class="font-weight-bolder">Fan Status : </span>
            <span class="font-weight-bolder text-danger" id="fanStatus"></span>
          </div>
          <div class="px-2 my-0 flex-fill">
            <span class="font-weight-bolder">Lamp Status : </span>
            <span class="font-weight-bolder text-danger" id="lampStatus"></span>
          </div>
          <div class="px-2 my-0 flex-fill">
            <span class="font-weight-bolder">Sprayer Status : </span>
            <span class="font-weight-bolder text-danger" id="sprayerStatus"></span>
          </div>
        </div>
        <div class="d-flex">
          <div class="px-2 my-2 flex-fill w-100">
            <button type="button" name="button" class="btn btn-sm btn-block w-100 btn-primary font-weight-bolder shadow-none" id="reload">Reload</button>
          </div>
          <div class="px-2 my-2 flex-fill w-100">
            <button type="button" name="button" class="btn btn-sm btn-block w-100 btn-success font-weight-bolder shadow-none" id="sending">Sending</button>
          </div>
        </div>
        <div class="d-flex">
          <div class="px-2 mb-2 flex-fill w-100">
            <marquee>&copy;2020 Arif Setiyawan - Teknik Elektro 2016 - Universitas PGRI Banyuwangi</marquee>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://ardirjs.github.io/distribution/plugin/jquery/jquery.min.js" charset="utf-8"></script>
  <script src="https://ardirjs.github.io/distribution/plugin/popper/umd/popper.min.js" charset="utf-8"></script>
  <script src="https://ardirjs.github.io/distribution/plugin/bootstrap/js/bootstrap.min.js" charset="utf-8"></script>
  <script src="https://www.gstatic.com/firebasejs/7.21.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.21.0/firebase-database.js"></script>
  <script type="text/javascript">
    var firebaseConfig = {
      apiKey: "AIzaSyD_5x5KhegnNIfIRTZhJSI7dyGctWMIZ7Y",
      authDomain: "kontroler-mcu.firebaseapp.com",
      databaseURL: "https://kontroler-mcu.firebaseio.com",
      projectId: "kontroler-mcu",
      storageBucket: "kontroler-mcu.appspot.com",
      messagingSenderId: "697563302957",
      appId: "1:697563302957:web:d6cbb536b82a6118d9bca4"
    };
    firebase.initializeApp(firebaseConfig);
    firebase.database().ref('/').once('value').then(function(snapshot) {
      var json = snapshot.val();
      jQuery('#setInterval').val(json.setInterval);
      jQuery('#setHumidity').val(json.setHumidity);
      jQuery('#setTemperature').val(json.setTemperature);
    });
    setInterval(function() {
      firebase.database().ref('/').once('value').then(function(snapshot) {
        var json = snapshot.val();
        jQuery('#humidity').html(json.humidity);
        jQuery('#temperature').html(json.temperature);
        jQuery('#fanStatus').addClass(json.fanStatus ? 'text-success' : 'text-danger').removeClass(json.fanStatus ? 'text-danger' : 'text-success').html(json.fanStatus ? 'Active' : 'Not Active');
        jQuery('#lampStatus').addClass(json.lampStatus ? 'text-success' : 'text-danger').removeClass(json.lampStatus ? 'text-danger' : 'text-success').html(json.lampStatus ? 'Active' : 'Not Active');
        jQuery('#sprayerStatus').addClass(json.sprayerStatus ? 'text-success' : 'text-danger').removeClass(json.sprayerStatus ? 'text-danger' : 'text-success').html(json.sprayerStatus ? 'Active' : 'Not Active');
      });
    }, 1000);
    jQuery('#reload').click(function() {
      location.reload();
    });
    jQuery('#sending').click(function() {
      var updates = {
        setInterval: parseInt(jQuery('#setInterval').val()),
        setHumidity: parseInt(jQuery('#setHumidity').val()),
        setTemperature: parseInt(jQuery('#setTemperature').val())
      };
      firebase.database().ref('/').update(
        updates,
        function (error) {
          if (error) {
            alert("Data failed to save, please try again");
          } else {
            alert("Data saved successfully")
          }
        }
      );
    });
  </script>
</body>
</html>
